import{_ as r,M as o,p as c,q as l,R as e,N as t,V as a,t as i,a1 as d}from"./framework-5866ffd3.js";const m={},h=e("h1",{id:"parser",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#parser","aria-hidden":"true"},"#"),i(" Parser")],-1),u={style:{"margin-top":"-0.5em"}},f=e("em",null,"by Scott Daniel â€¢ last updated Mar 22, 2024",-1),p=d(`<p>A parser that reads HTMLs downloaded from PACER and breaks them up into JSON format.</p><h2 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h2><p>To run the parser:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>python parse_pacer.py <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> INPUT_DIR
</code></pre></div><h3 id="arguments" tabindex="-1"><a class="header-anchor" href="#arguments" aria-hidden="true">#</a> Arguments</h3><ul><li><code>INPUT_DIR</code>: Relative path to the folder where HTMLs will be read, e.g. <code>../../data/pacer/ilnd/html</code>.</li></ul>`,6),g=e("code",null,"html",-1),_=e("code",null,"json",-1),y=e("code",null,"summaries",-1),b=e("code",null,"output-dir",-1),w=e("code",null,"summaries-dir",-1),v=d(`<h3 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h3><ul><li><code>-o, --output-dir TEXT</code> <em>(path)</em> The folder where the parsed JSONs will be placed. If none is provided, they will be placed in <code>INPUT_DIR/../json/</code>.</li><li><code>-s, --summaries-dir TEXT</code> <em>(path)</em> The folder where the scraper will look for accompanying case summaries. the parsed JSONs will be placed into. If none is provided, it will default to <code>INPUT_DIR/../summaries/</code>. See more on case summaries <a href="#case-summaries">below</a>.</li><li><code>-c, --court TEXT</code> <em>(defaults to none)</em> The standard abbreviation for the district court being parsed, e.g. <code>ilnd</code>. If not specified, and if using the directory structure mentioned above, the parser will inference the court abbreviation from the parent folder.</li><li><code>-d, --debug</code> <em>(flag)</em> Turns off concurrency in the parser. Useful for ensuring that error traces are printed properly.</li><li><code>-f, --force-rerun</code> <em>(flag)</em> Tells the parser to process HTMLs even when their corresponding JSONs already exist. Useful for obtaining fresh parses after scraping updates to existing dockets.</li><li><code>--force-ucids TEXT</code> <em>(path)</em> A path to a CSV file that contais a &#39;ucid&#39; column. If supplied, the parser will force reruns only on HTMLs that match up with the provided UCIDs, rather than on the every HTML in the input directory.</li><li><code>-nw, --n-workers INTEGER</code> <em>(defaults to 16)</em> Number of concurrent workers to run simultaneously - i.e., no. of simultaneous parses running.</li></ul><h3 id="shell-scripts" tabindex="-1"><a class="header-anchor" href="#shell-scripts" aria-hidden="true">#</a> Shell scripts</h3><p>Two shell scripts, <code>parse_all.sh</code> and <code>parse_subset.sh</code>, are provided for batch runs across multiple court directories. To run them:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code><span class="token function">sh</span> parse_all.sh INPATH <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span>
<span class="token function">sh</span> parse_subset.sh INPATH <span class="token parameter variable">-s</span> STARTDIR <span class="token parameter variable">-e</span> ENDDIR <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span>
</code></pre></div><p>where <code>INPATH</code> is the relative path to a parent folder containing multiple court directories, <code>STARTDIR</code> and <code>ENDDIR</code> define the inclusive alphabetical range of court directories to parse (e.g. <code>nyed</code> through <code>nywd</code>), and <code>OPTIONS</code> are any command-line options you would like to pass through to <code>parse_pacer.py</code> (e.g. <code>--debug</code>, <code>--force-rerun</code>, <code>--n-workers</code>).</p><p><em>Note: each court directory in the batch must include an HTML folder for input and a JSON folder for output, as is true in the scraper-generated directory structure.</em></p><h3 id="case-summaries" tabindex="-1"><a class="header-anchor" href="#case-summaries" aria-hidden="true">#</a> Case summaries</h3><p>Case summary pages can be downloaded through the SCALES scraper. They provide a small amount of additional information (documented <a href="#parser-schemas">below</a>) that is not available in the case docket reports. By default, the scraper will have placed any downloaded summaries in the <code>/summaries</code> sub-directory of a given court directory.</p><p>When the parser runs, it will also parse any summaries associated with a case. It will search for the html files for these summaries in the summaries sub-directory (which can be manually specified with the <code>--summaries-dir</code> option).</p><h2 id="parser-schema" tabindex="-1"><a class="header-anchor" href="#parser-schema" aria-hidden="true">#</a> Parser schema</h2><h3 id="filepath-fields" tabindex="-1"><a class="header-anchor" href="#filepath-fields" aria-hidden="true">#</a> Filepath fields</h3><p>The following fields are inferenced from the filepath:</p><ul><li><code>case_id</code> <em>(string)</em> - Pacer&#39;s case ID, which has the form O:YY-TY-##### (where O is a court office code, YY is a year, TY is the case type, and ##### is a numeric identifier associated with this case)</li><li><code>case_type</code> <em>(string)</em> - usually &#39;cr&#39; (criminal) or &#39;cv&#39; (civil); other types are acceptable (&#39;mc&#39;, &#39;bk&#39;...), but they will result in an incomplete parse</li><li><code>court</code> <em>(string)</em> - read from the command line if passed in with the <code>-c</code> option</li><li><code>ucid</code> <em>(string)</em> - SCALES&#39;s case ID (stands for &#39;unique case id&#39;), generated by prepending the court abbreviation to the Pacer case ID and used to ensure that cases with identical Pacer IDs from different districts can be distinguished from one another</li></ul><h3 id="header-fields" tabindex="-1"><a class="header-anchor" href="#header-fields" aria-hidden="true">#</a> Header fields</h3><p>The following fields are pulled from the header of the Pacer docket:</p><ul><li><code>header_case_id</code> <em>(string)</em> - similar to <code>case_id</code>, but pulled from the docket itself rather than the filepath</li><li><code>case_status</code> <em>(string)</em> - &#39;open&#39; if a terminating date is listed, else &#39;closed&#39;</li><li><code>case_name</code> <em>(string)</em></li><li><code>filing_date</code> <em>(string)</em></li><li><code>terminating_date</code> <em>(string)</em></li><li><code>city</code> <em>(string)</em></li><li><code>lead_case_id</code> <em>(string)</em> - if the case is part of multi-district litigation (MDL), the id of the lead case</li><li><code>lead_case_pacer_id</code> <em>(string)</em> - the internal numerical ID that PACER uses to refer to the lead case</li><li><code>magistrate_case_ids</code> <em>(list of strings)</em></li><li><code>related_cases</code> <em>(list of strings)</em> - any case numbers found in the &quot;Related cases:&quot; header line</li><li><code>other_courts</code> <em>(list of strings)</em> - any case numbers found in the &quot;Case in other court:&quot; header line</li><li><code>filed_in_error_text</code> <em>(string)</em> - any known &quot;filed in error&quot; messages that were found on the page</li><li><code>case_flags</code> <em>(list of strings)</em> - any flags listed in the upper right corner of the Pacer docket</li><li><code>mdl_code</code> <em>(integer)</em></li><li><strong>Civil only:</strong> <code>judge</code> <em>(string)</em> - encoded on a per-defendant basis in criminal cases</li><li><strong>Civil only:</strong> <code>referred_judges</code> <em>(list of strings)</em> - encoded on a per-defendant basis in criminal cases</li><li><strong>Civil only:</strong> <code>appeals_case_ids</code><em>(list of strings)</em> - encoded on a per-defendant basis in criminal cases</li><li><strong>Civil only:</strong> <code>nature_suit</code> <em>(string)</em></li><li><strong>Civil only:</strong> <code>jury_demand</code> <em>(string)</em></li><li><strong>Civil only:</strong> <code>cause</code> <em>(string)</em></li><li><strong>Civil only:</strong> <code>jurisdiction</code> <em>(string)</em></li><li><strong>Civil only:</strong> <code>monetary_demand</code> <em>(string)</em></li></ul><h3 id="body-fields" tabindex="-1"><a class="header-anchor" href="#body-fields" aria-hidden="true">#</a> Body fields</h3><p>The following fields are pulled from the body of the Pacer docket:</p><ul><li><code>parties</code> <em>(list of dicts)</em> - each item contains: <ul><li><code>name</code> <em>(string)</em></li><li><code>pacer_id</code> <em>(integer)</em> - only filled in for criminal cases, which number their defendants</li><li><code>role</code> <em>(string)</em> - the role (Plaintiff, Defendant, Petitioner, Respondent, etc) listed on the docket</li><li><code>party_type</code> <em>(string)</em> - the SCALES-defined category (&#39;plaintiff&#39;, &#39;defendant&#39;, &#39;other_party&#39;, etc) into which the role was classified</li><li><code>entity_info</code> <em>(dict)</em>: <ul><li><code>raw_info</code>, <code>office_name</code>, <code>address</code>, <code>phone</code>, <code>fax</code>, <code>email</code> <em>(strings)</em></li><li><code>terminating_date</code> <em>(string)</em> - any individual terminating date pertaining to this party</li></ul></li><li><code>counsel</code> <em>(list of dicts):</em> - each item contains: <ul><li><code>name</code> <em>(string)</em></li><li><code>is_pro_se</code>, <code>is_lead_attorney</code>, <code>is_notice_attorney</code>, <code>is_pro_hac_vice</code> <em>(booleans)</em></li><li><code>designation</code>, <code>bar_status</code>, <code>trial_bar_status</code> <em>(strings)</em></li><li><code>has_see_above</code> <em>(boolean)</em> - whether or not address is listed as &#39;see above for address&#39;, meaning address info should be obtained from preceding counsel entries</li><li><code>entity_info</code> <em>(dict)</em> - contains the same fields as the party-level <code>entity_info</code> dict described above</li></ul></li><li><strong>Criminal only:</strong> <code>pending_counts</code>, <code>terminated_counts</code> <em>(lists of dicts)</em> - each item contains <code>pacer_id</code> <em>(integer)</em>, <code>counts</code> <em>(string)</em>, <code>disposition</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>complaints_text</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>complaints_disposition</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>highest_offense_level_opening</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>highest_offense_level_terminated</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>judge</code> <em>(string)</em></li><li><strong>Criminal only:</strong> <code>referred_judges</code> <em>(list of strings)</em></li><li><strong>Criminal only:</strong> <code>appeals_case_ids</code> <em>(list of strings)</em></li></ul></li><li><code>docket_available</code> <em>(boolean)</em> - False if the docket table was empty, redacted, etc</li><li><code>docket</code> <em>(list of dictionaries)</em> - each item contains: <ul><li><code>date_filed</code> <em>(string)</em></li><li><code>ind</code> <em>(string)</em> - Pacer&#39;s numerical index for this entry (can be an empty string, as not all Pacer entries are numbered)</li><li><code>docket_text</code> <em>(string)</em></li><li><code>documents</code> <em>(dictionary)</em> - each key is either a non-zero attachment number or &#39;0&#39; for the main document, and each value is a dictionary with the following structure: <ul><li><code>url</code> <em>(string)</em> - the Pacer URL for this document</li><li><code>span</code> <em>(dictionary)</em> - the starting and ending indices (within <code>docket_text</code>) of the hyperlink to the document, formatted as a dictionary with keys <code>start</code> and <code>end</code></li><li><code>edges</code> <em>(list of tuples)</em> - each element is a three-value tuple (encoded in graph-edge format) representing a hyperlink between two docket entries, with the first value encoding the index of the source entry within <code>docket</code>, the second value encoding the index of the target entry, and the third value encoding the starting and ending indices of the hyperlink within <code>docket_text</code> (as specified in <code>span</code> above)</li></ul></li></ul></li></ul><h3 id="receipt-fields" tabindex="-1"><a class="header-anchor" href="#receipt-fields" aria-hidden="true">#</a> Receipt fields</h3><p>The following fields are pulled from the &#39;Transaction Receipt&#39; at the bottom of the Pacer docket:</p><ul><li><code>billable_pages</code> <em>(integer)</em></li><li><code>cost</code> <em>(float)</em></li><li><code>download_timestamp</code> <em>(string)</em></li><li><code>n_docket_reports</code> <em>(integer)</em> - the number of times the SCALES scraper has modified this docket (1 if there have never been updates, &gt;1 if new docket entries have been added after the initial download)</li></ul><h3 id="case-summary-fields" tabindex="-1"><a class="header-anchor" href="#case-summary-fields" aria-hidden="true">#</a> Case-summary fields</h3><p>When a case summary page is available, the following fields are pulled from that page and stored as a dict in the <code>summary</code> field of the main JSON.</p><ul><li><code>case_id</code> (<em>string</em>) - the case id e.g. &#39;1:16-cv-00001, All defendants&#39;</li><li><code>case_name</code> (<em>string</em>) - e.g. &#39;USA v. Johnson et al.&#39;</li><li><code>date_filed</code> (<em>string</em>)</li><li><code>date_terminated</code> (<em>string</em>)</li><li><code>date_of_last_filing</code> (<em>string</em>) - the date of the latessts filing in the case</li><li><code>presiding</code> (<em>string</em>) - presiding judge, if any</li><li><code>referral</code> (<em>string</em>) - referred judge, if any</li><li><code>billable_pages</code> (<em>int</em>) - no. of billable pages (usually just 1)</li><li><code>cost</code> (<em>float</em>) - the cost of downloading the case summary (usually 0.10)</li><li><code>download_timestamp</code> (<em>string</em>) - the time the case summary was downloaded</li><li><strong>Civil only:</strong> <code>parties</code> (<em>list of objects</em>) - each item contains: <ul><li><code>name</code> (<em>string</em>)</li><li><code>role</code> (<em>string</em>) - their role in the case e.g (&#39;Plaintiff&#39;, &#39;Defendant&#39;)</li><li><code>represented_by</code> (<em>string</em>) - name of party&#39;s representation</li><li><code>email</code> (<em>string</em>)</li><li><code>phone</code> (<em>string</em>)</li><li><code>fax</code> (<em>string</em>) - n.b.: often non-fax related things end up here (e.g. &#39;Pro Hac Vice&#39;, &#39;MDL&#39;)</li></ul></li><li><strong>Criminal only:</strong> <code>defendants</code> (<em>list of dicts</em>) - each item contains: <ul><li><code>name</code> (<em>string</em>)</li><li><code>ind</code> (<em>string</em>) - <em>should</em> correspond to the defendant indices in the docket report</li><li><code>office</code> (<em>string</em>) - the court office</li><li><code>county</code> (<em>string</em>) - the court county</li><li><code>filed</code> (<em>string</em>) - defendant-specific filing date</li><li><code>terminated</code> (<em>string</em>) - defendant-specific terminating date</li><li><code>reopened</code> (<em>string</em>) - defendant-specific reopening date</li><li><code>plaintiffs</code> (<em>list of objects</em>) - the plaintiffs bringing the case against this defendant (each item contains the same six fields that belong to the civil <code>parties</code> items above)</li><li><code>other_court_case</code> (<em>string</em>) - other associated cases</li><li><code>magistrate_case</code> (<em>string</em>) - previous magistrate case, if any</li><li><code>flags</code> (<em>list of strings</em>) - PACER flags that apply to this defendant, e.g. [&#39;CLOSED&#39;, &#39;PRO_SE&#39;]</li><li><code>defendant_custody_status</code> (<em>string</em>) -</li><li><code>pending_status</code> (<em>string</em>) -</li><li><code>counts</code> (<em>list of objects</em>) - each item contains <code>count</code> (the count reference e.g. &#39;1sss&#39;), <code>citation</code>, <code>offense_level</code>, and <code>text</code> (the text associated with the count)</li><li><code>complaints</code> (<em>list of objects</em>) - each item contains <code>citation</code>, <code>offense_level</code> and <code>text</code></li></ul></li></ul><h3 id="internal-use-only" tabindex="-1"><a class="header-anchor" href="#internal-use-only" aria-hidden="true">#</a> Internal use only</h3><p>The following fields are not pulled directly from the Pacer docket, and are primarily meant for internal use:</p><ul><li><code>mdl_id_source</code> <em>(string)</em> - the origin of <code>mdl_code</code> (either &#39;lead_case_id&#39; or &#39;flags&#39;)</li><li><code>is_mdl</code> <em>(boolean)</em> - true if <code>mdl_code</code> is non-null or if the case has any MDL flags</li><li><code>is_multi</code> <em>(boolean)</em> - true if <code>is_mdl</code> is true or if any of <code>lead_case_id</code>, <code>member_case_key</code>, or <code>other_court</code> is non-null</li><li><code>member_case_key</code> <em>(string)</em> - a UCID-formatted version of <code>lead_case_id</code> (or a copy of <code>ucid</code> if this case is a lead case); used to write MDL-related data to an external file for improved performance</li><li><code>download_url</code> <em>(string)</em> - the URL from which this HTML was downloaded; only present if parsing an HTML from the SCALES scraper</li><li><code>case_pacer_id</code> <em>(integer)</em> - the internal numerical ID that PACER uses to refer to this case; only present if parsing an HTML from the SCALES scraper</li><li><code>scraper_labels</code> <em>(list of strings)</em> - any text labels (in the form of a &quot;stamp&quot; that the SCALES scraper leaves at the end of the HTMl) added by the user who scraped this case</li><li><code>is_stub</code> <em>(boolean)</em> - True if &#39;stub&#39; is in <code>scraper_labels</code></li><li><code>is_private</code> <em>(boolean)</em> - True if &#39;private&#39; is in <code>scraper_labels</code></li><li><strong>Deprecated:</strong> <code>source</code> <em>(string)</em> - was used to distinguish between JSONs from this parser and similarly-formatted JSONs from other sources</li><li><strong>Deprecated:</strong> <code>recap_id</code> <em>(integer)</em> - was used for RECAP&#39;s internal numerical ids when remapping data acquired from RECAP</li></ul>`,29);function T(k,C){const s=o("font"),n=o("RouterLink");return c(),l("div",null,[h,e("div",u,[t(s,{size:"2"},{default:a(()=>[f]),_:1})]),p,e("p",null,[i("If you are using the parser in conjunction with SCALES's PACER scraper, you will likely want your input directory to be the scraper-generated "),g,i(" folder within your chosen court directory, as outlined "),t(n,{to:"/scraper/#directory-structure"},{default:a(()=>[i("here")]),_:1}),i(". Similarly, the output and summaries directories will be inferred as the "),_,i(" and "),y,i(" folder within that chosen court directory, but can be overriden by providing values for "),b,i(" and "),w,i(".")]),v])}const S=r(m,[["render",T],["__file","index.html.vue"]]);export{S as default};
