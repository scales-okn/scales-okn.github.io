import{_ as a,j as s,M as h,p,q as u,R as c,N as v,V as j,w as l,Q as y}from"./framework-5866ffd3.js";const g=/^\w+:\/\//,_={name:"JsonString",props:{jsonValue:{type:String,required:!0}},data(){return{expand:!0,canExtend:!1}},mounted(){this.$refs.itemRef.offsetHeight>this.$refs.holderRef.offsetHeight&&(this.canExtend=!0)},methods:{toggle(){this.expand=!this.expand}},render(){let e=this.jsonValue;const t=g.test(e);let n;return this.expand?(n={class:["jv-item","jv-string"],ref:"itemRef"},t?(e=`<a href="${e}" target="_blank" class="jv-link">${e}</a>`,n.innerHTML=`"${e.toString()}"`):n.innerText=`"${e.toString()}"`):n={class:"jv-ellipsis",onClick:this.toggle,innerText:"..."},s("span",{},[this.canExtend&&s("span",{class:{"jv-toggle":!0,open:this.expand},onClick:this.toggle}),s("span",{class:{"jv-holder-node":!0},ref:"holderRef"}),s("span",n)])}},E=a(_,[["__file","json-string.vue"]]),b={name:"JsonUndefined",props:{jsonValue:{type:Object,default:null}},render(){return s("span",{class:["jv-item","jv-undefined"],innerText:this.jsonValue===null?"null":"undefined"})}},w=a(b,[["__file","json-undefined.vue"]]),k={name:"JsonNumber",props:{jsonValue:{type:Number,required:!0}},render(){const e=Number.isInteger(this.jsonValue);return s("span",{class:{"jv-item":!0,"jv-number":!0,"jv-number-integer":e,"jv-number-float":!e},innerText:this.jsonValue.toString()})}},V=a(k,[["__file","json-number.vue"]]),A={name:"JsonBoolean",props:{jsonValue:Boolean},render(){return s("span",{class:["jv-item","jv-boolean"],innerText:this.jsonValue.toString()})}},B=a(A,[["__file","json-boolean.vue"]]),N={name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,forceExpand:Boolean,sort:Boolean,previewMode:Boolean,showArrayIndex:Boolean},data(){return{value:{}}},computed:{ordered(){if(!this.sort)return this.value;const e={};return Object.keys(this.value).sort().forEach(t=>{e[t]=this.value[t]}),e}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e){setTimeout(()=>{this.value=e},0)},toggle(){this.$emit("expand",!this.expand),this.dispatchEvent()},toggleAll(){this.$emit("expandAll",!this.expand),this.dispatchEvent()},dispatchEvent(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}}},render(){let e=[];if(!this.previewMode&&!this.keyName&&e.push(s("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:t=>{t.altKey?this.toggleAll():this.toggle()}})),e.push(s("span",{class:["jv-item","jv-object"],innerText:"{"})),this.expand){for(let t in this.ordered)if(this.ordered.hasOwnProperty(t)){let n=this.ordered[t];e.push(s(d,{keyName:t,value:n,sort:this.sort,depth:this.depth+1,previewMode:this.previewMode,forceExpand:this.forceExpand,showArrayIndex:this.showArrayIndex}))}}return!this.expand&&this.value&&Object.keys(this.value).length&&e.push(s("span",{class:"jv-ellipsis",title:`click to reveal object content (keys: ${Object.keys(this.ordered).join(", ")})`,innerText:"...",onClick:t=>{t.altKey?this.toggleAll():this.toggle()}})),e.push(s("span",{class:["jv-item","jv-object"],innerText:"}"})),s("span",e)}},C=a(N,[["__file","json-object.vue"]]),$={name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,forceExpand:Boolean,previewMode:Boolean,showArrayIndex:Boolean},data(){return{value:[]}},watch:{jsonValue(e){this.setValue(e)}},mounted(){this.setValue(this.jsonValue)},methods:{setValue(e,t=0){t===0&&(this.value=[]),setTimeout(()=>{e.length>t&&(this.value.push(e[t]),this.setValue(e,t+1))},0)},toggle(){this.$emit("update:expand",!this.expand),this.dispatchEvent()},toggleAll(){this.$emit("update:expandAll",!this.expand),this.dispatchEvent()},dispatchEvent(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}}},render(){let e=[];return!this.previewMode&&!this.keyName&&e.push(s("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:t=>{t.altKey?this.toggleAll():this.toggle()}})),e.push(s("span",{class:["jv-item","jv-array"],innerText:"["})),this.expand&&this.value.forEach((t,n)=>{e.push(s(d,{keyName:this.showArrayIndex?`${n}`:"",value:t,sort:this.sort,depth:this.depth+1,previewMode:this.previewMode,forceExpand:this.forceExpand,showArrayIndex:this.showArrayIndex}))}),!this.expand&&this.value.length&&e.push(s("span",{class:"jv-ellipsis",title:`click to reveal ${this.value.length} hidden items`,innerText:"...",onClick:t=>{t.altKey?this.toggleAll():this.toggle()}})),e.push(s("span",{class:["jv-item","jv-array"],innerText:"]"})),s("span",e)}},M=a($,[["__file","json-array.vue"]]),J={name:"JsonFunction",props:{jsonValue:{type:Function,required:!0}},render(){return s("span",{class:["jv-item","jv-function"],title:this.jsonValue.toString(),innerHTML:"&lt;function&gt;"})}},T=a(J,[["__file","json-function.vue"]]),S={name:"JsonDate",inject:["timeformat"],props:{jsonValue:{type:Date,required:!0}},render({injections:e}){const t=this.jsonValue,n=e.timeformat;return s("span",{class:["jv-item","jv-string"],innerText:`"${n(t)}"`})}},I=a(S,[["__file","json-date.vue"]]);const O={name:"JsonBox",inject:["expandDepth"],props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean,forceExpand:Boolean,showArrayIndex:Boolean},data(){return{expand:!0,forceExpandMe:this.forceExpand}},mounted(){this.expand=this.previewMode||!(this.depth>=this.expandDepth)||this.forceExpandMe},methods:{toggle(){this.expand=!this.expand,this.dispatchEvent()},toggleAll(){this.expand=!this.expand,this.forceExpandMe=this.expand,this.dispatchEvent()},dispatchEvent(){try{this.$el.dispatchEvent(new Event("resized"))}catch{var e=document.createEvent("Event");e.initEvent("resized",!0,!1),this.$el.dispatchEvent(e)}},getPath(){const e=[this.keyName];let t=this.$parent;for(;t.depth;)t.$el.classList.contains("jv-node")&&e.push(t.keyName),t=t.$parent;return e.reverse()}},render(){let e=[],t;this.value===null||this.value===void 0?t=w:Array.isArray(this.value)?t=M:Object.prototype.toString.call(this.value)==="[object Date]"?t=I:typeof this.value=="object"?t=C:typeof this.value=="number"?t=V:typeof this.value=="string"?t=E:typeof this.value=="boolean"?t=B:typeof this.value=="function"&&(t=T);const n=this.keyName&&this.value&&(Array.isArray(this.value)||typeof this.value=="object"&&Object.prototype.toString.call(this.value)!=="[object Date]");return!this.previewMode&&n&&e.push(s("span",{class:{"jv-toggle":!0,open:!!this.expand},onClick:o=>{o.altKey?this.toggleAll():this.toggle()}})),this.keyName&&e.push(s("span",{class:"jv-key",innerText:`${this.keyName}:`})),e.push(s(t,{class:"jv-push",jsonValue:this.value,keyName:this.keyName,sort:this.sort,depth:this.depth,expand:this.expand,previewMode:this.previewMode,forceExpand:this.forceExpandMe,showArrayIndex:this.showArrayIndex,onExpand:o=>{this.expand=o},onExpandAll:o=>{this.expand=o,this.forceExpandMe=this.expand}})),s("div",{class:{"jv-node":!0,"jv-key-node":Boolean(this.keyName)&&!n,toggle:!this.previewMode&&n}},e)}},d=a(O,[["__file","json-box.vue"]]);const D={name:"JsonViewer",components:{JsonBox:d},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"jv-light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},showArrayIndex:{type:Boolean,default:!0}},provide(){return{expandDepth:this.expandDepth,timeformat:this.timeformat}},data(){return{copied:!1,expandableCode:!1,expandCode:this.expanded}},computed:{jvClass(){return"jv-container "+this.theme+(this.boxed?" boxed":"")}},methods:{toggleExpandCode(){this.expandCode=!this.expandCode}}};function q(e,t,n,o,i,r){const f=h("json-box"),m=h("ClientOnly");return p(),u("div",{ref:"viewer",class:l(r.jvClass)},[c("div",{class:l(["jv-code",{open:i.expandCode,boxed:n.boxed}])},[v(m,null,{default:j(()=>[v(f,{ref:"jsonBox",value:n.value,sort:n.sort,"preview-mode":n.previewMode,"show-array-index":n.showArrayIndex},null,8,["value","sort","preview-mode","show-array-index"])]),_:1})],2),i.expandableCode&&n.boxed?(p(),u("div",{key:0,class:"jv-more",onClick:t[0]||(t[0]=(...x)=>r.toggleExpandCode&&r.toggleExpandCode(...x))},[c("span",{class:l(["jv-toggle",{open:!!i.expandCode}])},null,2)])):y("v-if",!0)],2)}const F=a(D,[["render",q],["__file","JsonViewer.vue"]]);export{F as default};
