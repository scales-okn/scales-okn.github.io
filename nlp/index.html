<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>SCALES NLP | SCALES OKN Documentation</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-e3cc0ea1.css" as="style"><link rel="stylesheet" href="/assets/style-e3cc0ea1.css">
    <link rel="modulepreload" href="/assets/app-d6e6d685.js"><link rel="modulepreload" href="/assets/framework-5866ffd3.js"><link rel="modulepreload" href="/assets/index.html-3410d2c3.js"><link rel="modulepreload" href="/assets/index.html-c0c6aa20.js"><link rel="prefetch" href="/assets/index.html-d1f0a0f1.js" as="script"><link rel="prefetch" href="/assets/index.html-8aa42642.js" as="script"><link rel="prefetch" href="/assets/index.html-b2a22001.js" as="script"><link rel="prefetch" href="/assets/index.html-a6253a07.js" as="script"><link rel="prefetch" href="/assets/index.html-3dd8f799.js" as="script"><link rel="prefetch" href="/assets/index.html-1117eaac.js" as="script"><link rel="prefetch" href="/assets/index.html-19efe831.js" as="script"><link rel="prefetch" href="/assets/index.html-dea02514.js" as="script"><link rel="prefetch" href="/assets/index.html-74f1f9ea.js" as="script"><link rel="prefetch" href="/assets/index.html-ec28af9b.js" as="script"><link rel="prefetch" href="/assets/index.html-09c79b5b.js" as="script"><link rel="prefetch" href="/assets/index.html-e54ffa7d.js" as="script"><link rel="prefetch" href="/assets/index.html-1e1cdc54.js" as="script"><link rel="prefetch" href="/assets/index.html-27330b36.js" as="script"><link rel="prefetch" href="/assets/index.html-76f78290.js" as="script"><link rel="prefetch" href="/assets/index.html-c5640fff.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-54cbf91a.js" as="script"><link rel="prefetch" href="/assets/index.html-532acdc9.js" as="script"><link rel="prefetch" href="/assets/index.html-59fed72b.js" as="script"><link rel="prefetch" href="/assets/index.html-b084653c.js" as="script"><link rel="prefetch" href="/assets/index.html-dbf069ea.js" as="script"><link rel="prefetch" href="/assets/index.html-17a43ef5.js" as="script"><link rel="prefetch" href="/assets/index.html-34c09e40.js" as="script"><link rel="prefetch" href="/assets/index.html-89c928f7.js" as="script"><link rel="prefetch" href="/assets/index.html-2b39e525.js" as="script"><link rel="prefetch" href="/assets/index.html-5a7ccd2f.js" as="script"><link rel="prefetch" href="/assets/index.html-b04443a0.js" as="script"><link rel="prefetch" href="/assets/index.html-cc6f4e07.js" as="script"><link rel="prefetch" href="/assets/index.html-45bfafa8.js" as="script"><link rel="prefetch" href="/assets/index.html-40340301.js" as="script"><link rel="prefetch" href="/assets/index.html-d0f287e0.js" as="script"><link rel="prefetch" href="/assets/index.html-bb5fa77c.js" as="script"><link rel="prefetch" href="/assets/404.html-87d54bd8.js" as="script"><link rel="prefetch" href="/assets/JsonViewer-29ecfca8.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/scales_logo.png" alt="SCALES OKN Documentation"><span class="site-name can-hide">SCALES OKN Documentation</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/guide/parserguide/" class="" aria-label="Guides"><!--[--><!--]--> Guides <!--[--><!--]--></a></div><div class="navbar-item"><a href="/scraper/" class="" aria-label="Documentation"><!--[--><!--]--> Documentation <!--[--><!--]--></a></div><div class="navbar-item"><a href="/downloads/" class="" aria-label="Other Resources"><!--[--><!--]--> Other Resources <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/guide/parserguide/" class="" aria-label="Guides"><!--[--><!--]--> Guides <!--[--><!--]--></a></div><div class="navbar-item"><a href="/scraper/" class="" aria-label="Documentation"><!--[--><!--]--> Documentation <!--[--><!--]--></a></div><div class="navbar-item"><a href="/downloads/" class="" aria-label="Other Resources"><!--[--><!--]--> Other Resources <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Guides <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/guide/parserguide/" class="sidebar-item" aria-label="PACER Parser: Observations, Warnings, and Advice"><!--[--><!--]--> PACER Parser: Observations, Warnings, and Advice <!--[--><!--]--></a><!----></li><li><a href="/guide/disambiguation/" class="sidebar-item" aria-label="Entity Disambiguation"><!--[--><!--]--> Entity Disambiguation <!--[--><!--]--></a><!----></li><li><a href="/guide/ontology/" class="sidebar-item" aria-label="Litigation Ontology"><!--[--><!--]--> Litigation Ontology <!--[--><!--]--></a><!----></li><li><a href="/guide/pipeline/" class="sidebar-item" aria-label="Notes on our internal data pipeline"><!--[--><!--]--> Notes on our internal data pipeline <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Documentation <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/scraper/" class="sidebar-item" aria-label="Scraper"><!--[--><!--]--> Scraper <!--[--><!--]--></a><!----></li><li><a href="/parser/" class="sidebar-item" aria-label="Parser"><!--[--><!--]--> Parser <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="SCALES NLP"><!--[--><!--]--> SCALES NLP <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/nlp/#pretrained-models" class="router-link-active router-link-exact-active sidebar-item" aria-label="Pretrained Models"><!--[--><!--]--> Pretrained Models <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/nlp/#getting-started" class="router-link-active router-link-exact-active sidebar-item" aria-label="Getting started"><!--[--><!--]--> Getting started <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#docket-language-model" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docket Language Model"><!--[--><!--]--> Docket Language Model <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#docket-classifier" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docket Classifier"><!--[--><!--]--> Docket Classifier <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#docket-encoder" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docket Encoder"><!--[--><!--]--> Docket Encoder <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/nlp/#quickstart" class="router-link-active router-link-exact-active sidebar-item" aria-label="Quickstart"><!--[--><!--]--> Quickstart <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/nlp/#installation" class="router-link-active router-link-exact-active sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#configuration" class="router-link-active router-link-exact-active sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/nlp/#collect-pacer-data" class="router-link-active router-link-exact-active sidebar-item" aria-label="Collect PACER Data"><!--[--><!--]--> Collect PACER Data <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/nlp/#simplified-scraper" class="router-link-active router-link-exact-active sidebar-item" aria-label="Simplified Scraper"><!--[--><!--]--> Simplified Scraper <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#simplified-parser" class="router-link-active router-link-exact-active sidebar-item" aria-label="Simplified Parser"><!--[--><!--]--> Simplified Parser <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/nlp/#apply-scales-models" class="router-link-active router-link-exact-active sidebar-item" aria-label="Apply SCALES Models"><!--[--><!--]--> Apply SCALES Models <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/nlp/#update-classifier-labels" class="router-link-active router-link-exact-active sidebar-item" aria-label="Update Classifier Labels"><!--[--><!--]--> Update Classifier Labels <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/nlp/#update-named-entity-extraction" class="router-link-active router-link-exact-active sidebar-item" aria-label="Update Named-entity Extraction"><!--[--><!--]--> Update Named-entity Extraction <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/nlp/#loading-tagged-dockets" class="router-link-active router-link-exact-active sidebar-item" aria-label="Loading Tagged Dockets"><!--[--><!--]--> Loading Tagged Dockets <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/redaction/" class="sidebar-item" aria-label="PACER redaction script"><!--[--><!--]--> PACER redaction script <!--[--><!--]--></a><!----></li><li><a href="/rdf/" class="sidebar-item" aria-label="Data Files (JSON and RDF)"><!--[--><!--]--> Data Files (JSON and RDF) <!--[--><!--]--></a><!----></li><li><a href="/rdfterms/" class="sidebar-item" aria-label="RDF Terms"><!--[--><!--]--> RDF Terms <!--[--><!--]--></a><!----></li><li><a href="/eventlog/" class="sidebar-item" aria-label="Event Log"><!--[--><!--]--> Event Log <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Data Sheets <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/ijp/" class="sidebar-item" aria-label="IJP Knowledge Network"><!--[--><!--]--> IJP Knowledge Network <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Other Resources <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/downloads/" class="sidebar-item" aria-label="Downloads"><!--[--><!--]--> Downloads <!--[--><!--]--></a><!----></li><li><a href="/repos/" class="sidebar-item" aria-label="Repositories"><!--[--><!--]--> Repositories <!--[--><!--]--></a><!----></li><li><a href="/consortium/" class="sidebar-item" aria-label="SCALES OKN Consortium"><!--[--><!--]--> SCALES OKN Consortium <!--[--><!--]--></a><!----></li><li><a href="/contact/" class="sidebar-item" aria-label="Contact"><!--[--><!--]--> Contact <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="scales-nlp" tabindex="-1"><a class="header-anchor" href="#scales-nlp" aria-hidden="true">#</a> SCALES NLP</h1><div style="margin-top:-0.5em;"><!----></div><p>An AI toolkit for legal research that includes a collection of deep learning models and utilities to:</p><ul><li>Download dockets from PACER and parse their contents</li><li>Classify the text of docket entries with 70+ labels</li><li>Extract named entities from docket entries</li><li>Apply a case-level logic to tagged data to identify key opening and dispositive events according to the <a href="/guide/ontology/" class="">SCALES Litigation Ontology</a></li></ul><h2 id="pretrained-models" tabindex="-1"><a class="header-anchor" href="#pretrained-models" aria-hidden="true">#</a> Pretrained Models</h2><p>This module builds on a collection of publicly available pretrained language models that can used to apply the SCALES Litigation Ontology to your own data. Check out the <a href="https://huggingface.co/scales-okn" target="_blank" rel="noopener noreferrer">scales-okn<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> page on the Hugging Face Model Hub for updates.</p><h3 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started" aria-hidden="true">#</a> Getting started</h3><p>To help illustrate how to use these models, we will use an example dataset.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>entries = [
 &#39;MOTION by Plaintiff Charles Shulruff, D.D.S. to certify class (Edelman, Daniel) (Entered: 01/22/2016)&#39;,
 &#39;MOTION by Plaintiff Able Home Health, LLC to certify class (Edelman, Daniel) (Entered: 01/28/2016)&#39;,
 &#39;MOTION by Plaintiff Dr. Charles Shulruff, D.D.S. to certify class (Attachments: # 1 Exhibit A-E)(Edelman, Daniel) (Entered: 02/24/2016)&#39;,
 &#39;MOTION by Plaintiff Lindabeth Rivera to certify class (Carroll, Katrina) (Entered: 03/01/2016)&#39;,
 &#39;MOTION by Plaintiff Christy Griffith to certify class (Glapion, Jeremy) (Entered: 08/01/2016)&#39;
]

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docket-language-model" tabindex="-1"><a class="header-anchor" href="#docket-language-model" aria-hidden="true">#</a> Docket Language Model</h3><p><a href="https://huggingface.co/scales-okn/docket-language-model" target="_blank" rel="noopener noreferrer">scales-okn/docket-language-model<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>The base model that we use for downstream fine-tuning on both classification and entity recognition tasks. This model builds on a <a href="https://huggingface.co/microsoft/deberta-v3-large" target="_blank" rel="noopener noreferrer">microsoft/deberta-v3-large<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> that has been further finetuned on 11 million docket entries using the masked language modelling task.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># use with transformers</span>
<span class="token keyword">from</span> transformers <span class="token keyword">import</span> AutoModel<span class="token punctuation">,</span> AutoTokenizer

model_name <span class="token operator">=</span> <span class="token string">&#39;scales-okn/docket-language-model&#39;</span>
tokenizer <span class="token operator">=</span> AutoTokenizer<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>model_name<span class="token punctuation">)</span>
model <span class="token operator">=</span> AutoModel<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>model_name<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To use the model with the example data then we tokenize the entries and feed that as the input to the model.</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>model_inputs = tokenizer(entries, padding=True, truncation=True, return_tensors=&quot;pt&quot;)
outputs = model(**model_inputs)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>We can then access the calculated tensors for each of the five entries (output shape will be 5x49x1024).</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>outputs[0].shape
## torch.Size([5, 49, 1024])
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docket-classifier" tabindex="-1"><a class="header-anchor" href="#docket-classifier" aria-hidden="true">#</a> Docket Classifier</h3><p><a href="https://huggingface.co/scales-okn/docket-classification" target="_blank" rel="noopener noreferrer">scales-okn/docket-classification<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>A multi-label classifier that has been finetuned to predict the SCALES litigation ontology labels. The complete list of labels and their descriptions can be found <a href="/guide/ontology/#classifier-labels" class="">here</a></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#Import the scales package</span>
<span class="token keyword">import</span> scales_nlp

<span class="token comment">#Load the model</span>
model <span class="token operator">=</span> scales_nlp<span class="token punctuation">.</span>pipeline<span class="token punctuation">(</span><span class="token string">&#39;docket-classifier&#39;</span><span class="token punctuation">)</span>

predictions <span class="token operator">=</span> model<span class="token punctuation">(</span>entries<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="docket-encoder" tabindex="-1"><a class="header-anchor" href="#docket-encoder" aria-hidden="true">#</a> Docket Encoder</h3><p><a href="https://huggingface.co/scales-okn/docket-encoder" target="_blank" rel="noopener noreferrer">scales-okn/docket-encoder<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>A text encoding model that can be used to map a docket entry to a vector for similarity search. This model was finetuned using semi-supervised training routine based on a contrastive, multi-dimensional version of <a href="https://www.sbert.net/docs/package_reference/losses.html#batchhardtripletloss" target="_blank" rel="noopener noreferrer">batch hard triplet loss<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> aimed at approximating the relative tfidf distances between batches of docket entries. Note that if using this model without the SCALES &#39;docket-encoder&#39; pipeline, it is the CLF token embedding in the last hidden layer that is used as the embedding representation for the whole entry.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment">#Import the scales package</span>
<span class="token keyword">import</span> scales_nlp

<span class="token comment">#Load the model</span>
model <span class="token operator">=</span> scales_nlp<span class="token punctuation">.</span>pipeline<span class="token punctuation">(</span><span class="token string">&#39;docket-encoder&#39;</span><span class="token punctuation">)</span>

vectors <span class="token operator">=</span> model<span class="token punctuation">(</span>entries<span class="token punctuation">)</span>
vectors<span class="token punctuation">.</span>shape
<span class="token comment">## (5, 1024)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="quickstart" tabindex="-1"><a class="header-anchor" href="#quickstart" aria-hidden="true">#</a> Quickstart</h2><h3 id="installation" tabindex="-1"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h3><p>This module can be installed with pip:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>$ pip <span class="token function">install</span> scales-nlp
</code></pre></div><p>You should also have the appropriate version of <a href="https://pytorch.org/get-started/locally/" target="_blank" rel="noopener noreferrer">PyTorch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> installed for your system.</p><h3 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h3><p>To get the most out of this module, run the following to set module-wide configuration variables. These variables can also be set or overriden by your environment.</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>$ scales-nlp configure
</code></pre></div><ul><li><code>PACER_DIR</code> The folder where all of your PACER data will be saved and managed. This should be the same top-level directory that you use with the scraper and parser.</li><li><code>PACER_USERNAME</code> The username to your PACER account.</li><li><code>PACER_PASSWORD</code> The password to your PACER account.</li><li><code>HUGGING_FACE_TOKEN</code> You only need to include this if you want to use the pipelines API with private models on Hugging Face.</li></ul><p>In addition to these variables, you can also configure the default values that are used by the training routines API. These can be set by running <code>scales-nlp configure train-args</code>.</p><h2 id="collect-pacer-data" tabindex="-1"><a class="header-anchor" href="#collect-pacer-data" aria-hidden="true">#</a> Collect PACER Data</h2><p>This module includes simplified wrappers for the SCALES scraper and parser. This version eschews much of those tools&#39; original functionality in order to make it easy to download a single case. For running bulk downloads of PACER data or otherwise taking advantage of the wide range of functionality available in the original implementation, you can consult the <a href="https://github.com/scales-okn/PACER-tools" target="_blank" rel="noopener noreferrer">PACER-tools<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> package, as well as the individual documentation pages for the <a href="/scraper/" class="">scraper</a> and <a href="/parser/" class="">parser</a>.</p><h3 id="simplified-scraper" tabindex="-1"><a class="header-anchor" href="#simplified-scraper" aria-hidden="true">#</a> Simplified Scraper</h3><p>To download a single case, provide a UCID to the following command:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>$ scales-nlp download <span class="token punctuation">[</span>UCID<span class="token punctuation">]</span>
</code></pre></div><p>The UCID consists of the court abbreviation and the docket number, separated by two semicolons (e.g. <code>azd;;3:18-cv-08134</code>).</p><h3 id="simplified-parser" tabindex="-1"><a class="header-anchor" href="#simplified-parser" aria-hidden="true">#</a> Simplified Parser</h3><p>To run the parser across all of your downloaded cases, run the following:</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>$ scales-nlp parse
</code></pre></div><p>You may also provide a court abbreviation as an argument if you only want to apply the parser to cases within a single court.</p><h2 id="apply-scales-models" tabindex="-1"><a class="header-anchor" href="#apply-scales-models" aria-hidden="true">#</a> Apply SCALES Models</h2><h3 id="update-classifier-labels" tabindex="-1"><a class="header-anchor" href="#update-classifier-labels" aria-hidden="true">#</a> Update Classifier Labels</h3><p>The following command can be used to compute and update computed classifier labels from the SCALES litigation ontology to new data. By default the model outputs will be cached in your PACER_DIR and the model will only be applied to new cases that do not already have saved predictions. You can override saved predictions by passing the <code>--reset</code> flag. For optimal performance it is recommended that you only perform inference using the SCALES models on a device with a GPU. If you run into memory errors, try adjusting the <code>--batch-size</code> to your needs.</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>$ scales-nlp update-labels --batch-size <span class="token number">4</span>
</code></pre></div><h3 id="update-named-entity-extraction" tabindex="-1"><a class="header-anchor" href="#update-named-entity-extraction" aria-hidden="true">#</a> Update Named-entity Extraction</h3><p>SCALES will release several NER models in the near future.</p><h2 id="loading-tagged-dockets" tabindex="-1"><a class="header-anchor" href="#loading-tagged-dockets" aria-hidden="true">#</a> Loading Tagged Dockets</h2><p>Downloaded cases can be loaded using the SCALES NLP <code>Docket</code> object as follows. If classifier labels or entity spans have been computed for the case, these will accessible as well. Furthermore, the <code>Docket</code> object will consolidate all of the information available in the case to infer the specific pathway events. To learn more about labels, entities, and pathway events, check out the <a href="/guide/ontology/" class="">Litigation Ontology Guide</a>.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> scales_nlp

docket <span class="token operator">=</span> scales_nlp<span class="token punctuation">.</span>Docket<span class="token punctuation">.</span>from_ucid<span class="token punctuation">(</span><span class="token string">&quot;CASE UCID&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>docket<span class="token punctuation">.</span>ucid<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>docket<span class="token punctuation">.</span>case_name<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>docket<span class="token punctuation">.</span>header<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> entry <span class="token keyword">in</span> docket<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>row_number<span class="token punctuation">,</span> entry<span class="token punctuation">.</span>entry_number<span class="token punctuation">,</span> entry<span class="token punctuation">.</span>date_filed<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>event<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>labels<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>spans<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/parser/" class="" aria-label="Parser"><!--[--><!--]--> Parser <!--[--><!--]--></a></span><span class="next"><a href="/redaction/" class="" aria-label="PACER redaction script"><!--[--><!--]--> PACER redaction script <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app-d6e6d685.js" defer></script>
  </body>
</html>
